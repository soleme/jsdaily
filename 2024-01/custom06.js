const exclusion = [
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "10000001",
        name: "시말서",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "10000003",
        name: "경고",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "10000004",
        name: "견책",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "20000001",
        name: "감봉1급",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "20000002",
        name: "감봉2급",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "20000003",
        name: "감봉3급",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "30000001",
        name: "견책1급",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "30000002",
        name: "견책2급",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "30000003",
        name: "견책3급",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "40000001",
        name: "정직1개월",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "40000002",
        name: "정직2개월",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "40000003",
        name: "정직3개월",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "50000001",
        name: "강직",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "50000002",
        name: "대기",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "50000003",
        name: "해고",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000001",
        name: "(생산)경고장",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000002",
        name: "(생산)감봉",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000003",
        name: "(생산)견책",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000004",
        name: "(생산)출근정지15이하",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000005",
        name: "(생산)출근정지1월미만",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000006",
        name: "(생산)출근정지1월이상",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000007",
        name: "(생산)출근정지2월↑",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000008",
        name: "(생산)출근정지4월↑",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000009",
        name: "(생산)정직1월미만",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000010",
        name: "(생산)정직2월미만",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000011",
        name: "(생산)정직4월미만",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000012",
        name: "(생산)정직4월이상",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "60000013",
        name: "(생산)정직15일이하",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "70000001",
        name: "기타(변상)",
        targetYn: "Y",
    },
    {
        createdAt: null,
        createdBy: null,
        modifiedAt: "2024-01-08T11:23:32.221Z",
        modifiedBy: "anonymous",
        year: "2024",
        targetType: "P",
        code: "70000002",
        name: "개별교육",
        targetYn: "Y",
    },
];

let disciplinaryData = [
    {
        userId: "hradmin3",
        date: "2023-10-01",
        code: "40000003",
        codeName: "정직3개월",
    },
    {
        userId: "hradmin3",
        date: "2017-08-01",
        code: "40000001",
        codeName: "정직1개월",
    },
    {
        userId: "11009997",
        date: "2023-10-01",
        code: "40000003",
        codeName: "정직3개월",
    },
    {
        userId: "11009997",
        date: "2017-08-01",
        code: "40000001",
        codeName: "정직1개월",
    },
    {
        userId: "1230150",
        date: "2023-11-01",
        code: "20000003",
        codeName: "감봉3급",
    },
    {
        userId: "1600424",
        date: "2023-11-01",
        code: "20000001",
        codeName: "감봉1급",
    },
]

//exclusion 제외기준
//disciplinaryData 징계

const beforeYear = parseInt(vYear) - 1;

const isDisciplinary = disciplinaryData.some(data => {
    const exclusionCodes = exclusion.map(exclude => exclude.code);
    return exclusionCodes.includes(data.code) && data.date.includes(beforeYear.toString()) && data.userId === userId;
});

if (isDisciplinary) {
    extractionYn = 'N';
    nonTargetReason += '[징계] ';
}

// const userIds = disciplinaryData
//     .filter(data => exclusion.some(exclude => data.code.includes(exclude.code)))
//     .map(data => data.userId);
//
// const uniqueUserIds = [...new Set(userIds)];
// const userIdList = uniqueUserIds.map(userId => ({ userId }));
//
// console.log(userIdList);

